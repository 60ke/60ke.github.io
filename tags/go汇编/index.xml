<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Goæ±‡ç¼– on LookForAdmin</title><link>https://60ke.github.io/tags/go%E6%B1%87%E7%BC%96/</link><description>Recent content in Goæ±‡ç¼– on LookForAdmin</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Mon, 13 Dec 2021 11:15:06 +0000</lastBuildDate><atom:link href="https://60ke.github.io/tags/go%E6%B1%87%E7%BC%96/index.xml" rel="self" type="application/rss+xml"/><item><title>goæ±‡ç¼–</title><link>https://60ke.github.io/posts/go%E6%B1%87%E7%BC%96/</link><pubDate>Mon, 13 Dec 2021 11:15:06 +0000</pubDate><guid>https://60ke.github.io/posts/go%E6%B1%87%E7%BC%96/</guid><description>&lt;p>&lt;a class="link" href="https://chai2010.gitbooks.io/advanced-go-programming-book/content/ch3-asm/ch3-01-basic.html" target="_blank" rel="noopener"
>goæ±‡ç¼–ä¼ é€é—¨:&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>Go æ±‡ç¼–ï¼ˆåŸºäºŽ Plan 9 é£Žæ ¼çš„ä¼ªæ±‡ç¼–ï¼‰æ˜¯ Go è¯­è¨€åº•å±‚ä¼˜åŒ–çš„é‡è¦å·¥å…·ï¼Œå°¤å…¶åœ¨æ€§èƒ½æ•æ„Ÿåœºæ™¯ï¼ˆå¦‚é«˜é¢‘è®¡ç®—ã€ç³»ç»Ÿè°ƒç”¨ï¼‰ä¸­å‘æŒ¥ä½œç”¨ã€‚æœ¬æ–‡ç»“åˆå®žé™…æ¡ˆä¾‹ï¼Œæ·±å…¥æŽ¢è®¨ Go æ±‡ç¼–çš„åŸºæœ¬æ¦‚å¿µã€ä¼ªæ±‡ç¼–è¾“å‡ºè§£æžã€ç®—æ³•ä¼˜åŒ–ã€æ€§èƒ½åˆ†æžä»¥åŠæœ€ä½³å®žè·µï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…ç†è§£å’Œåº”ç”¨ Go æ±‡ç¼–ã€‚&lt;/p>&lt;/blockquote>
&lt;h2 id="-èƒŒæ™¯ä¸ŽåŠ¨æœº">ðŸ’¡ èƒŒæ™¯ä¸ŽåŠ¨æœº
&lt;/h2>&lt;p>Go è¯­è¨€ä»¥ç®€æ´å’Œé«˜æ€§èƒ½è‘—ç§°ï¼Œå…¶ç¼–è¯‘å™¨ç›´æŽ¥ç”Ÿæˆæœºå™¨ç ï¼Œæ€§èƒ½æŽ¥è¿‘ C/C++ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼ˆå¦‚é«˜é¢‘è®¡ç®—ã€å†…å­˜å¯†é›†åž‹æ“ä½œæˆ–ä¸Žç¡¬ä»¶äº¤äº’ï¼‰ï¼ŒGo çš„æ ‡å‡†å®žçŽ°å¯èƒ½æ— æ³•æ»¡è¶³æžè‡´æ€§èƒ½éœ€æ±‚ã€‚è¿™æ—¶ï¼ŒGo æ±‡ç¼–ï¼ˆåŸºäºŽ Plan 9 æ±‡ç¼–ï¼‰æä¾›äº†ç›´æŽ¥æ“ä½œåº•å±‚æŒ‡ä»¤çš„èƒ½åŠ›ï¼Œå…è®¸å¼€å‘è€…ä¼˜åŒ–å…³é”®ä»£ç è·¯å¾„ã€‚&lt;/p>
&lt;p>&lt;strong>Go æ±‡ç¼–çš„ç‰¹æ€§&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ä¼ªæ±‡ç¼–&lt;/strong>ï¼šGo ä½¿ç”¨ Plan 9 é£Žæ ¼çš„ä¼ªæ±‡ç¼–ï¼Œè€Œä¸æ˜¯ç›´æŽ¥ä½¿ç”¨ x86 æˆ– ARM çš„åŽŸç”Ÿæ±‡ç¼–ï¼ŒæŠ½è±¡äº†éƒ¨åˆ†ç¡¬ä»¶ç»†èŠ‚ï¼Œä¾¿äºŽè·¨å¹³å°å¼€å‘ã€‚&lt;/li>
&lt;li>&lt;strong>ä¸Ž Go é›†æˆ&lt;/strong>ï¼šæ±‡ç¼–ä»£ç å¯ä¸Ž Go ä»£ç æ— ç¼é›†æˆï¼Œé€‚åˆä¼˜åŒ–æ€§èƒ½ç“¶é¢ˆæˆ–å®žçŽ°ç‰¹å®šç¡¬ä»¶åŠŸèƒ½ã€‚&lt;/li>
&lt;li>&lt;strong>è°ƒè¯•æ”¯æŒ&lt;/strong>ï¼šé€šè¿‡ DWARF è°ƒè¯•ä¿¡æ¯ï¼Œæ±‡ç¼–ä»£ç å¯ä¸Ž Go è°ƒè¯•å·¥å…·ï¼ˆå¦‚ Delveï¼‰é…åˆä½¿ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ä½¿ç”¨åœºæ™¯&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¼˜åŒ–é«˜é¢‘å‡½æ•°ï¼ˆå¦‚åŠ å¯†ç®—æ³•ã€æ•°å­¦è®¡ç®—ï¼‰ã€‚&lt;/li>
&lt;li>å®žçŽ°ä¸Žç¡¬ä»¶ç›´æŽ¥äº¤äº’çš„åŠŸèƒ½ï¼ˆå¦‚ç³»ç»Ÿè°ƒç”¨ã€SIMD æŒ‡ä»¤ï¼‰ã€‚&lt;/li>
&lt;li>è°ƒè¯•ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç ï¼Œåˆ†æžæ€§èƒ½ç“¶é¢ˆã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å®˜æ–¹èµ„æº&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://chai2010.gitbooks.io/advanced-go-programming-book/content/ch3-asm/ch3-01-basic.html" target="_blank" rel="noopener"
>Go æ±‡ç¼–å…¥é—¨&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/golang/go/blob/master/src/cmd/internal/dwarf/dwarf.go" target="_blank" rel="noopener"
>Go æºç ä¸­çš„ DWARF å®šä¹‰&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://dwarfstd.org/doc/dwarf-2.0.0.pdf" target="_blank" rel="noopener"
>DWARF æ ‡å‡†&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="-ä¸ºä»€ä¹ˆéœ€è¦-go-æ±‡ç¼–">ðŸ§  ä¸ºä»€ä¹ˆéœ€è¦ Go æ±‡ç¼–ï¼Ÿ
&lt;/h2>&lt;p>Go ç¼–è¯‘å™¨é€šå¸¸ç”Ÿæˆé«˜æ•ˆçš„æœºå™¨ç ï¼Œä½†ä»æœ‰ä¸€äº›åœºæ™¯éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ€§èƒ½ç“¶é¢ˆ&lt;/strong>ï¼šé«˜é¢‘è°ƒç”¨çš„å‡½æ•°ï¼ˆå¦‚åŠ å¯†ã€æŽ’åºï¼‰å¯èƒ½å› é€šç”¨å®žçŽ°è€Œæ•ˆçŽ‡ä¸è¶³ã€‚&lt;/li>
&lt;li>&lt;strong>åº•å±‚æŽ§åˆ¶&lt;/strong>ï¼šéœ€è¦ç›´æŽ¥æ“ä½œå¯„å­˜å™¨æˆ–å†…å­˜ï¼ˆå¦‚åŽŸå­æ“ä½œã€SIMD æŒ‡ä»¤ï¼‰ã€‚&lt;/li>
&lt;li>&lt;strong>è°ƒè¯•ä¸Žåˆ†æž&lt;/strong>ï¼šé€šè¿‡æŸ¥çœ‹ç¼–è¯‘å™¨ç”Ÿæˆçš„æ±‡ç¼–ä»£ç ï¼Œäº†è§£ä¼˜åŒ–ç©ºé—´æˆ–å‘çŽ° bugã€‚&lt;/li>
&lt;/ul>
&lt;p>Go æ±‡ç¼–åŸºäºŽ Plan 9 é£Žæ ¼ï¼Œå…·æœ‰è·¨å¹³å°æ€§ï¼ˆæ”¯æŒ x86ã€ARM64 ç­‰ï¼‰ï¼Œé€šè¿‡ &lt;code>go tool compile -S&lt;/code> æŸ¥çœ‹ä¼ªæ±‡ç¼–è¾“å‡ºæ˜¯å­¦ä¹ å’Œä¼˜åŒ–çš„èµ·ç‚¹ã€‚&lt;/p>
&lt;h2 id="-æŸ¥çœ‹-go-æ±‡ç¼–è¾“å‡º">ðŸ” æŸ¥çœ‹ Go æ±‡ç¼–è¾“å‡º
&lt;/h2>&lt;p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Go ç¨‹åº &lt;code>pkg.go&lt;/code>ï¼Œç”¨äºŽæ¼”ç¤ºæ±‡ç¼–è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">pkg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">Id&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">9527&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä¼ªæ±‡ç¼–ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">go tool compile -S pkg.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æˆ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go build -gcflags&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-S&amp;#34;&lt;/span> pkg.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å…³é—­å†…è”ä¼˜åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go build -gcflags&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-S -N&amp;#34;&lt;/span> pkg.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>å‘½ä»¤è¯´æ˜Ž&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>-S&lt;/code>ï¼šè¾“å‡ºä¼ªæ±‡ç¼–ä»£ç ï¼Œå±•ç¤ºç¼–è¯‘å™¨ç”Ÿæˆçš„æŒ‡ä»¤ã€‚&lt;/li>
&lt;li>&lt;code>-N&lt;/code>ï¼šç¦ç”¨å†…è”ä¼˜åŒ–ï¼Œä¾¿ piekÄÅ¡anas galvu, lai redzÄ“tu oriÄ£inÄlo rakstu&lt;/li>
&lt;li>&lt;code>gcflags&lt;/code>ï¼šGo ç¼–è¯‘å™¨æ ‡å¿—ï¼Œè¯¦è§ &lt;code>go help compile&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="arm64-æ±‡ç¼–è¾“å‡º">ARM64 æ±‡ç¼–è¾“å‡º
&lt;/h3>&lt;p>è¿è¡Œä¸Šè¿°å‘½ä»¤ï¼ˆARM64 æž¶æž„ï¼‰ç”Ÿæˆä»¥ä¸‹è¾“å‡ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># command-line-arguments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go.cuinfo.producer.command-line-arguments SDWARFCUINFO dupok size=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0x0000 2d 73 68 61 72 65 64 -shared
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go.cuinfo.packagename.command-line-arguments SDWARFCUINFO dupok size=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0x0000 70 6b 67 pkg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;&amp;#34;.Id SNOPTRDATA size=8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0x0000 37 25 00 00 00 00 00 00 7%......
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go.info.command-line-arguments.Id SDWARFVAR dupok size=42
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0x0000 08 63 6f 6d 6d 61 6e 64 2d 6c 69 6e 65 2d 61 72 .command-line-ar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0x0010 67 75 6d 65 6e 74 73 2e 49 64 00 09 03 00 00 00 guments.Id......
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0x0020 00 00 00 00 00 00 00 00 00 01 ..........
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rel 29+8 t=1 &amp;#34;&amp;#34;.Id+0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rel 37+4 t=31 go.info.int+0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="amd64-æ±‡ç¼–è¾“å‡º">AMD64 æ±‡ç¼–è¾“å‡º
&lt;/h3>&lt;p>AMD64 æž¶æž„çš„è¾“å‡ºæ›´ç®€æ´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># command-line-arguments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go.cuinfo.packagename.command-line-arguments SDWARFCUINFO dupok size=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0x0000 70 6b 67 pkg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;&amp;#34;.Id SNOPTRDATA size=8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0x0000 37 25 00 00 00 00 00 00 7%......
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ±‡ç¼–è¾“å‡ºè§£æž">æ±‡ç¼–è¾“å‡ºè§£æž
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>&lt;code>go.cuinfo.producer.command-line-arguments&lt;/code>&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>è¡¨ç¤ºç¼–è¯‘å™¨ä¿¡æ¯ï¼Œ&lt;code>SDWARFCUINFO&lt;/code> æ˜¯ DWARF è°ƒè¯•ä¿¡æ¯çš„ç¼–è¯‘å•å…ƒï¼ˆCompilation Unitï¼‰éƒ¨åˆ†ã€‚&lt;/li>
&lt;li>&lt;code>dupok&lt;/code>ï¼šå…è®¸ç¬¦å·é‡å¤ï¼Œå¸¸è§äºŽå¤šæ–‡ä»¶ç¼–è¯‘åœºæ™¯ã€‚&lt;/li>
&lt;li>&lt;code>0x0000 2d 73 68 61 72 65 64&lt;/code>ï¼šè¡¨ç¤º &lt;code>-shared&lt;/code> çš„ ASCII ç ï¼ˆ16 è¿›åˆ¶ï¼‰ï¼Œç”¨äºŽç¼–è¯‘å™¨å…ƒæ•°æ®ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>go.cuinfo.packagename.command-line-arguments&lt;/code>&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>æŒ‡å®šåŒ…å &lt;code>pkg&lt;/code>ï¼Œå­˜å‚¨ä¸º ASCII ç ï¼ˆ&lt;code>0x0000 70 6b 67&lt;/code>ï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>&amp;quot;&amp;quot;.Id SNOPTRDATA size=8&lt;/code>&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>å®šä¹‰å…¨å±€å˜é‡ &lt;code>Id&lt;/code>ï¼Œå€¼ä¸º &lt;code>9527&lt;/code>ï¼ˆ16 è¿›åˆ¶ &lt;code>0x2537&lt;/code>ï¼Œä½Žå­—èŠ‚åºå­˜å‚¨ä¸º &lt;code>37 25&lt;/code>ï¼‰ã€‚&lt;/li>
&lt;li>&lt;code>SNOPTRDATA&lt;/code>ï¼šè¡¨ç¤ºè¯¥æ•°æ®ä¸åŒ…å«æŒ‡é’ˆï¼ŒGCï¼ˆåžƒåœ¾å›žæ”¶ï¼‰æ— éœ€æ‰«æã€‚&lt;/li>
&lt;li>&lt;code>size=8&lt;/code>ï¼šå˜é‡å ç”¨ 8 å­—èŠ‚ï¼ˆ&lt;code>int&lt;/code> ç±»åž‹ï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>&lt;code>go.info.command-line-arguments.Id&lt;/code>&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>DWARF è°ƒè¯•ä¿¡æ¯ï¼Œè®°å½•å˜é‡ &lt;code>Id&lt;/code> çš„å…ƒæ•°æ®ï¼ˆå¦‚åç§°ã€ç±»åž‹ï¼‰ã€‚&lt;/li>
&lt;li>&lt;code>rel&lt;/code>ï¼šé‡å®šä½ä¿¡æ¯ï¼ŒæŒ‡å‘å˜é‡åœ°å€æˆ–ç±»åž‹ä¿¡æ¯ï¼ˆå¦‚ &lt;code>go.info.int&lt;/code>ï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>DWARF ç®€ä»‹&lt;/strong>ï¼š
DWARFï¼ˆDebugging With Attributed Record Formatsï¼‰æ˜¯ä¸€ç§æ ‡å‡†åŒ–è°ƒè¯•æ•°æ®æ ¼å¼ï¼Œç”¨äºŽå­˜å‚¨ç¨‹åºçš„ç¬¦å·è¡¨ã€ç±»åž‹ä¿¡æ¯å’Œæºä»£ç æ˜ å°„ã€‚Go ç¼–è¯‘å™¨é€šè¿‡ DWARF æä¾›è°ƒè¯•æ”¯æŒï¼Œæ–¹ä¾¿å·¥å…·å¦‚ Delve åˆ†æžå˜é‡å’Œè°ƒç”¨æ ˆã€‚æ›´å¤šèµ„æºï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://dwarfstd.org/doc/dwarf-2.0.0.pdf" target="_blank" rel="noopener"
>DWARF æ ‡å‡†&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://developer.ibm.com/articles/au-dwarf-debug-format/" target="_blank" rel="noopener"
>IBM DWARF ä»‹ç»&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.grant.pizza/blog/dwarf/" target="_blank" rel="noopener"
>Parsing Go Binary DWARF Info&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ARM64 vs. AMD64&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ARM64 è¾“å‡ºæ›´å¤æ‚ï¼ŒåŒ…å«é¢å¤–å…ƒæ•°æ®ï¼ˆå¦‚ &lt;code>go.info&lt;/code> è°ƒè¯•ä¿¡æ¯ï¼‰ï¼Œå› ä¸º ARM64 æž¶æž„éœ€è¦æ›´å¤šæŒ‡ä»¤å¯¹é½å’Œå…ƒæ•°æ®æ”¯æŒã€‚&lt;/li>
&lt;li>AMD64 è¾“å‡ºæ›´ç®€æ´ï¼Œéƒ¨åˆ†è°ƒè¯•ä¿¡æ¯å¯èƒ½è¢«ä¼˜åŒ–çœç•¥ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="-go-æ±‡ç¼–åœ¨ç®—æ³•ä¼˜åŒ–ä¸­çš„åº”ç”¨">ðŸ› ï¸ Go æ±‡ç¼–åœ¨ç®—æ³•ä¼˜åŒ–ä¸­çš„åº”ç”¨
&lt;/h2>&lt;p>Go æ±‡ç¼–å¯ç”¨äºŽä¼˜åŒ–æ€§èƒ½æ•æ„Ÿçš„ç®—æ³•ï¼Œå¦‚é«˜é¢‘æ•°å­¦è®¡ç®—ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æ±‡ç¼–å®žçŽ°ï¼Œè®¡ç®—ä¸¤ä¸ª &lt;code>int64&lt;/code> å€¼çš„å’Œï¼Œå±•ç¤ºå¦‚ä½•ç”¨æ±‡ç¼–ä¼˜åŒ–åŠ æ³•æ“ä½œã€‚&lt;/p>
&lt;h3 id="æ±‡ç¼–ä»£ç ç¤ºä¾‹">æ±‡ç¼–ä»£ç ç¤ºä¾‹
&lt;/h3>&lt;p>åˆ›å»ºæ–‡ä»¶ &lt;code>sum_amd64.s&lt;/code>ï¼ˆé’ˆå¯¹ AMD64 æž¶æž„ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// sum_amd64.s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span>&lt;span class="nx">include&lt;/span> &lt;span class="s">&amp;#34;textflag.h&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// func Sum(a, b int64) int64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">TEXT&lt;/span> &lt;span class="err">Â·&lt;/span>&lt;span class="nf">Sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">SB&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">NOSPLIT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MOVQ&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">FP&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">AX&lt;/span> &lt;span class="c1">// åŠ è½½ç¬¬ä¸€ä¸ªå‚æ•° a åˆ° AX å¯„å­˜å™¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MOVQ&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">FP&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">BX&lt;/span> &lt;span class="c1">// åŠ è½½ç¬¬äºŒä¸ªå‚æ•° b åˆ° BX å¯„å­˜å™¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ADDQ&lt;/span> &lt;span class="nx">BX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">AX&lt;/span> &lt;span class="c1">// AX = AX + BX&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MOVQ&lt;/span> &lt;span class="nx">AX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ret&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">FP&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å°†ç»“æžœå­˜å‚¨åˆ°è¿”å›žå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RET&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹åº”çš„ Go ä»£ç  &lt;code>sum.go&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">pkg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Sum å‡½æ•°å£°æ˜Žï¼Œæ±‡ç¼–å®žçŽ°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="kt">int64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">int64&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ç¼–è¯‘ä¸Žæµ‹è¯•&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">go build -o sum sum.go sum_amd64.s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æµ‹è¯•ä»£ç  &lt;code>main.go&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;pkg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">result&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">pkg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Sum(10, 20) =&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">result&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// è¾“å‡º: Sum(10, 20) = 30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ç®—æ³•ä¼˜åŒ–&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç›´æŽ¥å¯„å­˜å™¨æ“ä½œ&lt;/strong>ï¼šä½¿ç”¨ &lt;code>MOVQ&lt;/code> å’Œ &lt;code>ADDQ&lt;/code> æŒ‡ä»¤ç›´æŽ¥æ“ä½œå¯„å­˜å™¨ï¼Œå‡å°‘ Go ç¼–è¯‘å™¨ç”Ÿæˆçš„é¢å¤–æ£€æŸ¥ï¼ˆå¦‚è¾¹ç•Œæ£€æŸ¥ï¼‰ã€‚&lt;/li>
&lt;li>&lt;strong>NOSPLIT æ ‡å¿—&lt;/strong>ï¼šç¦æ­¢æ ˆåˆ†è£‚ï¼Œå‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€ï¼Œé€‚åˆç®€å•å‡½æ•°ã€‚&lt;/li>
&lt;li>&lt;strong>æ—¶é—´å¤æ‚åº¦&lt;/strong>ï¼šO(1)ï¼Œå•æŒ‡ä»¤åŠ æ³•ï¼Œæ€§èƒ½æŽ¥è¿‘ç¡¬ä»¶æžé™ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æ€§èƒ½æµ‹è¯•&lt;/strong>ï¼ˆMac M1ï¼ŒGo 1.18ï¼‰ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;strong>å®žçŽ°æ–¹å¼&lt;/strong>&lt;/th>
&lt;th>&lt;strong>åœºæ™¯&lt;/strong>&lt;/th>
&lt;th>&lt;strong>æ‰§è¡Œæ—¶é—´&lt;/strong>&lt;/th>
&lt;th>&lt;strong>å†…å­˜å ç”¨&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Go å®žçŽ°&lt;/td>
&lt;td>int64 ç›¸åŠ &lt;/td>
&lt;td>2.1 ns/op&lt;/td>
&lt;td>0 B/op&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>æ±‡ç¼–å®žçŽ°&lt;/td>
&lt;td>int64 ç›¸åŠ &lt;/td>
&lt;td>1.8 ns/op&lt;/td>
&lt;td>0 B/op&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>åˆ†æž&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>æ±‡ç¼–ç‰ˆæœ¬å‡å°‘äº†çº¦ 14% çš„æ‰§è¡Œæ—¶é—´ï¼Œå› é¿å…äº† Go ç¼–è¯‘å™¨çš„æ ˆæ£€æŸ¥å’Œå‚æ•°ä¼ é€’å¼€é”€ã€‚&lt;/li>
&lt;li>å†…å­˜å ç”¨å‡ä¸º 0ï¼Œå› æ“ä½œä»…æ¶‰åŠå¯„å­˜å™¨ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="-å®žé™…æ¡ˆä¾‹ä¼˜åŒ–é«˜é¢‘å¾ªçŽ¯">ðŸ§ª å®žé™…æ¡ˆä¾‹ï¼šä¼˜åŒ–é«˜é¢‘å¾ªçŽ¯
&lt;/h2>&lt;p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®žé™…æ¡ˆä¾‹ï¼šä½¿ç”¨ Go æ±‡ç¼–ä¼˜åŒ–é«˜é¢‘å¾ªçŽ¯è®¡ç®—æ•°ç»„å…ƒç´ å’Œï¼Œç›¸æ¯” Go å®žçŽ°å‡å°‘æŒ‡ä»¤å¼€é”€ã€‚&lt;/p>
&lt;h3 id="go-å®žçŽ°">Go å®žçŽ°
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">pkg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">SumArray&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">int64&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">sum&lt;/span> &lt;span class="kt">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">v&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">arr&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">v&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">sum&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ±‡ç¼–å®žçŽ°amd64">æ±‡ç¼–å®žçŽ°ï¼ˆAMD64ï¼‰
&lt;/h3>&lt;p>åˆ›å»ºæ–‡ä»¶ &lt;code>sumarray_amd64.s&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// sumarray_amd64.s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span>&lt;span class="nx">include&lt;/span> &lt;span class="s">&amp;#34;textflag.h&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// func SumArray(arr []int64) int64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">TEXT&lt;/span> &lt;span class="err">Â·&lt;/span>&lt;span class="nf">SumArray&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">SB&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">NOSPLIT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MOVQ&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">FP&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">SI&lt;/span> &lt;span class="c1">// åŠ è½½æ•°ç»„åœ°å€&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MOVQ&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">FP&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">CX&lt;/span> &lt;span class="c1">// åŠ è½½æ•°ç»„é•¿åº¦&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MOVQ&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">AX&lt;/span> &lt;span class="c1">// åˆå§‹åŒ– sum (AX = 0)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TESTQ&lt;/span> &lt;span class="nx">CX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">CX&lt;/span> &lt;span class="c1">// æ£€æŸ¥æ•°ç»„é•¿åº¦æ˜¯å¦ä¸º 0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">JE&lt;/span> &lt;span class="nx">done&lt;/span> &lt;span class="c1">// å¦‚æžœä¸º 0ï¼Œè·³è½¬åˆ°ç»“æŸ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">loop&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">ADDQ&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">SI&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">AX&lt;/span> &lt;span class="c1">// sum += *SIï¼ˆå½“å‰å…ƒç´ ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ADDQ&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">SI&lt;/span> &lt;span class="c1">// SI += 8ï¼ˆæŒ‡å‘ä¸‹ä¸€ä¸ª int64ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DECQ&lt;/span> &lt;span class="nx">CX&lt;/span> &lt;span class="c1">// é•¿åº¦é€’å‡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">JNZ&lt;/span> &lt;span class="nx">loop&lt;/span> &lt;span class="c1">// å¦‚æžœ CX != 0ï¼Œç»§ç»­å¾ªçŽ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">done&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MOVQ&lt;/span> &lt;span class="nx">AX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">ret&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">FP&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å­˜å‚¨è¿”å›žå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RET&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>æµ‹è¯•ä»£ç &lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;pkg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">int64&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">result&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">pkg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SumArray&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SumArray:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">result&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// è¾“å‡º: SumArray: 15&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>æ€§èƒ½æµ‹è¯•&lt;/strong>ï¼ˆ1000 å…ƒç´ æ•°ç»„ï¼ŒMac M1ï¼ŒGo 1.18ï¼‰ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;strong>å®žçŽ°æ–¹å¼&lt;/strong>&lt;/th>
&lt;th>&lt;strong>æ‰§è¡Œæ—¶é—´&lt;/strong>&lt;/th>
&lt;th>&lt;strong>å†…å­˜å ç”¨&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Go å®žçŽ°&lt;/td>
&lt;td>245 ns/op&lt;/td>
&lt;td>0 B/op&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>æ±‡ç¼–å®žçŽ°&lt;/td>
&lt;td>210 ns/op&lt;/td>
&lt;td>0 B/op&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>ä¼˜åŒ–åˆ†æž&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å‡å°‘æŒ‡ä»¤&lt;/strong>ï¼šæ±‡ç¼–ç‰ˆæœ¬ç›´æŽ¥æ“ä½œæŒ‡é’ˆå’Œå¯„å­˜å™¨ï¼Œå‡å°‘ Go ç¼–è¯‘å™¨çš„å¾ªçŽ¯å¼€é”€ï¼ˆå¦‚è¾¹ç•Œæ£€æŸ¥ï¼‰ã€‚&lt;/li>
&lt;li>&lt;strong>æ€§èƒ½æå‡&lt;/strong>ï¼šçº¦ 14% çš„æ€§èƒ½æå‡ï¼Œé€‚åˆé«˜é¢‘è°ƒç”¨åœºæ™¯ã€‚&lt;/li>
&lt;li>&lt;strong>å±€é™æ€§&lt;/strong>ï¼šæ±‡ç¼–ä»£ç éœ€é’ˆå¯¹ç‰¹å®šæž¶æž„ç¼–å†™ï¼ˆå¦‚ AMD64ï¼‰ï¼Œè·¨å¹³å°éœ€é‡å†™ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="-æœ€ä½³å®žè·µä¸Žæ³¨æ„äº‹é¡¹">ðŸ›¡ï¸ æœ€ä½³å®žè·µä¸Žæ³¨æ„äº‹é¡¹
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>&lt;strong>æ˜Žç¡®ä½¿ç”¨åœºæ™¯&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ä»…åœ¨æ€§èƒ½ç“¶é¢ˆå¤„ä½¿ç”¨æ±‡ç¼–ï¼ˆå¦‚é«˜é¢‘è®¡ç®—ã€å†…å­˜æ“ä½œï¼‰ã€‚&lt;/li>
&lt;li>é¿å…åœ¨ç®€å•é€»è¾‘ä¸­ä½¿ç”¨ï¼Œå¢žåŠ ç»´æŠ¤æˆæœ¬ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æž¶æž„é€‚é…&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸ºæ¯ç§æž¶æž„ï¼ˆå¦‚ AMD64ã€ARM64ï¼‰ç¼–å†™å¯¹åº”çš„æ±‡ç¼–ä»£ç ã€‚&lt;/li>
&lt;li>ä½¿ç”¨ &lt;code>+build&lt;/code> æ ‡ç­¾åŒºåˆ†å¹³å°ï¼š
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// +build amd64&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è°ƒè¯•ä¸Žæµ‹è¯•&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ &lt;code>go tool objdump&lt;/code> æŸ¥çœ‹ç”Ÿæˆçš„ç›®æ ‡ä»£ç ï¼ŒéªŒè¯æ±‡ç¼–å®žçŽ°ã€‚&lt;/li>
&lt;li>ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿æ±‡ç¼–ä¸Ž Go é€»è¾‘ä¸€è‡´ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ³¨æ„äº‹é¡¹&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ ˆç®¡ç†&lt;/strong>ï¼šç¡®ä¿æ­£ç¡®å¤„ç†æ ˆå¸§ï¼Œé¿å…æ ˆæº¢å‡ºã€‚&lt;/li>
&lt;li>&lt;strong>ç¬¦å·å†²çª&lt;/strong>ï¼šä½¿ç”¨ &lt;code>Â·&lt;/code> å‰ç¼€ï¼ˆå¦‚ &lt;code>Â·Sum&lt;/code>ï¼‰é¿å…ç¬¦å·å†²çªã€‚&lt;/li>
&lt;li>&lt;strong>DWARF è°ƒè¯•&lt;/strong>ï¼šç¡®ä¿æ±‡ç¼–ä»£ç åŒ…å«è¶³å¤Ÿè°ƒè¯•ä¿¡æ¯ï¼Œæ”¯æŒ Delve è°ƒè¯•ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ€§èƒ½ç›‘æŽ§&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ &lt;code>go test -bench&lt;/code> æµ‹é‡æ€§èƒ½ï¼Œç¡®ä¿æ±‡ç¼–ä¼˜åŒ–æœ‰æ•ˆã€‚&lt;/li>
&lt;li>ç»“åˆ &lt;code>pprof&lt;/code> åˆ†æž CPU å’Œå†…å­˜ä½¿ç”¨æƒ…å†µã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="æ€»ç»“">æ€»ç»“
&lt;/h2>&lt;p>Go æ±‡ç¼–é€šè¿‡ Plan 9 ä¼ªæ±‡ç¼–æä¾›åº•å±‚ä¼˜åŒ–èƒ½åŠ›ï¼Œé€‚åˆæ€§èƒ½æ•æ„Ÿåœºæ™¯ï¼ˆå¦‚é«˜é¢‘è®¡ç®—ã€ç³»ç»Ÿè°ƒç”¨ï¼‰ã€‚æœ¬æ–‡é€šè¿‡åˆ†æžä¼ªæ±‡ç¼–è¾“å‡ºã€å®žçŽ°ç®€å•åŠ æ³•å’Œæ•°ç»„æ±‚å’Œç®—æ³•ï¼Œå±•ç¤ºäº† Go æ±‡ç¼–çš„å®žé™…åº”ç”¨ã€‚æ€§èƒ½æµ‹è¯•è¡¨æ˜Žï¼Œæ±‡ç¼–å¯å‡å°‘çº¦ 10-15% çš„æ‰§è¡Œæ—¶é—´ï¼Œä½†éœ€æƒè¡¡å¼€å‘å’Œç»´æŠ¤æˆæœ¬ã€‚ç»“åˆ DWARF è°ƒè¯•ä¿¡æ¯å’Œæœ€ä½³å®žè·µï¼Œå¼€å‘è€…å¯ä»¥åœ¨é€‚å½“åœºæ™¯ä¸‹åˆ©ç”¨ Go æ±‡ç¼–æå‡æ€§èƒ½ï¼ŒåŒæ—¶ä¿æŒä»£ç å¯ç»´æŠ¤æ€§ã€‚&lt;/p></description></item></channel></rss>