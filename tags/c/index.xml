<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>c on LookForAdmin</title><link>https://60ke.github.io/tags/c/</link><description>Recent content in c on LookForAdmin</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 10 Nov 2022 11:05:53 +0800</lastBuildDate><atom:link href="https://60ke.github.io/tags/c/index.xml" rel="self" type="application/rss+xml"/><item><title>Itrustee</title><link>https://60ke.github.io/posts/itrustee/</link><pubDate>Thu, 10 Nov 2022 11:05:53 +0800</pubDate><guid>https://60ke.github.io/posts/itrustee/</guid><description>&lt;p>华为基于TrustZone开发了IturstTEE,一开始是在手机上使用,后来华为出了鲲鹏的服务器,在服务器端也支持了: &lt;a class="link" href="https://www.hikunpeng.com/zh/developer/boostkit/confidential-computing" target="_blank" rel="noopener"
>https://www.hikunpeng.com/zh/developer/boostkit/confidential-computing&lt;/a>。公司现有有一套泰山服务器搭建好了TEE环境,现记录一下TEE使用过程中遇到的问题。&lt;/p>
&lt;h3 id="环境部署">环境部署&lt;/h3>
&lt;p>&lt;a class="link" href="https://support.huawei.com/enterprise/zh/doc/EDOC1100231607/778dd7e" target="_blank" rel="noopener"
>https://support.huawei.com/enterprise/zh/doc/EDOC1100231607/778dd7e&lt;/a>&lt;/p>
&lt;h3 id="证书申请">证书申请&lt;/h3>
&lt;p>&lt;a class="link" href="https://support.huawei.com/enterprise/zh/doc/EDOC1100231607/65204c54" target="_blank" rel="noopener"
>https://support.huawei.com/enterprise/zh/doc/EDOC1100231607/65204c54&lt;/a>&lt;/p>
&lt;h3 id="sdk开发">SDK开发&lt;/h3>
&lt;p>CA,TA交互流程:
&lt;img src="https://ww1.sinaimg.cn/large/008kbQFaly1h7zvzqjljcj31fk1bc7hq.jpg"
loading="lazy"
alt="008kbQFaly1h7zvzqjljcj31fk1bc7hq"
>
&lt;a class="link" href="https://gitee.com/openeuler/itrustee_sdk/tree/master" target="_blank" rel="noopener"
>itrustee sdk&lt;/a>在码云上进行了开源,项目&lt;code>test&lt;/code>目录下有代码示例,以helloword为例:
helloword项目直接编译CA,TA并将其放入对应目录(CA=&amp;gt;/vendor/bin/,TA=&amp;gt;/data/),运行发现返回&lt;code>open session failed&lt;/code>(坑来了&amp;hellip;),使用&lt;code>tlogcat&lt;/code>命令查看日志,发现无相关日志输出&amp;hellip;
一番踩坑后发现:下面的这段代码缺少&lt;code>context.ta_path = (uint8_t *)&amp;quot;*.sec&amp;quot;;&lt;/code>,导致CA根本没有连接到TA,所以根本没有日志&amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C" data-lang="C">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">operation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">started&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">OPERATION_START_FLAG&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">operation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">paramTypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">TEEC_PARAM_TYPES&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">TEEC_NONE&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">TEEC_NONE&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">TEEC_NONE&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">TEEC_NONE&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">TEEC_OpenSession&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">session&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">g_demoTemplateUuid&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">TEEC_LOGIN_IDENTIFY&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">operation&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">origin&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">result&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">TEEC_SUCCESS&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;teec open session failed&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">goto&lt;/span> &lt;span class="n">cleanup_2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>加入代码后可以正常运行了:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">/vendor/bin/teec_hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Succeed to load TA, TA&lt;span class="err">&amp;#39;&lt;/span>s version: demo_20200601.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其它要注意的:&lt;/p>
&lt;ul>
&lt;li>CA运行路径需是: &lt;code>/vendor/bin/app_name&lt;/code>&lt;/li>
&lt;li>TA:加载CA的路径:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C" data-lang="C">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">addcaller_ca_exec&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">CA_PATH&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;root&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">TEE_SUCCESS&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Stackoverflow</title><link>https://60ke.github.io/posts/stackoverflow/</link><pubDate>Wed, 09 Nov 2022 11:55:43 +0800</pubDate><guid>https://60ke.github.io/posts/stackoverflow/</guid><description>&lt;ul>
&lt;li>C
C语言结构体语法:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C" data-lang="C">&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="n">Bit&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">unsigned&lt;/span> &lt;span class="nl">b&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a class="link" href="https://stackoverflow.com/questions/8564532/colon-in-c-struct-what-does-it-mean" target="_blank" rel="noopener"
>&amp;quot;:&amp;quot; (colon) in C struct - what does it mean?&lt;/a> &amp;lt;==&amp;gt; &lt;a class="link" href="https://stackoverflow.com/questions/824295/what-does-c-struct-syntax-a-b-mean" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/824295/what-does-c-struct-syntax-a-b-mean&lt;/a>&lt;/p></description></item><item><title>跨平台编译</title><link>https://60ke.github.io/drafts/golang%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91/</link><pubDate>Mon, 08 Nov 2021 11:27:50 +0000</pubDate><guid>https://60ke.github.io/drafts/golang%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91/</guid><description>&lt;h1 id="golang跨平台编译">golang跨平台编译&lt;/h1>
&lt;h2 id="运行go-tool-dist-list查看golang当前支持的平台">运行&lt;code>go tool dist list&lt;/code>查看golang当前支持的平台&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">aix/ppc64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">android/386
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">android/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">android/arm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">android/arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">darwin/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">darwin/arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dragonfly/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">freebsd/386
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">freebsd/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">freebsd/arm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">freebsd/arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">illumos/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ios/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ios/arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">js/wasm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/386
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/arm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/mips
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/mips64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/mips64le
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/mipsle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/ppc64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/ppc64le
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/riscv64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux/s390x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netbsd/386
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netbsd/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netbsd/arm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netbsd/arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openbsd/386
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openbsd/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openbsd/arm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openbsd/arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openbsd/mips64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">plan9/386
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">plan9/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">plan9/arm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">solaris/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">windows/386
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">windows/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">windows/arm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">windows/arm64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>额外的说一句,go竟然支持&lt;code>ios/amd64&lt;/code>以及官方支持&lt;code>js/wasm&lt;/code>&lt;/p>
&lt;h2 id="编译测试">编译测试&lt;/h2>
&lt;h3 id="darwinarm64">darwin/arm64&lt;/h3>
&lt;p>使用命令&lt;code>GOOS=&amp;quot;darwin&amp;quot; GOARCH=&amp;quot;arm64&amp;quot; go build hello.go&lt;/code>编译&lt;code>hello.go&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hello&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看hello的mach-o及大小&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">file hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello: Mach-O 64-bit executable arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stat -f &lt;span class="s2">&amp;#34;%z bytes&amp;#34;&lt;/span> hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1932594&lt;/span> bytes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到&lt;code>hello&lt;/code>为&lt;code>arm64&lt;/code>可执行文件&lt;/p>
&lt;h3 id="darwinamd64">darwin/amd64&lt;/h3>
&lt;p>使用命令&lt;code>GOOS=&amp;quot;darwin&amp;quot; GOARCH=&amp;quot;amd64&amp;quot; go build hello.go&lt;/code>编译&lt;code>hello.go&lt;/code>
查看hello的mach-o及大小&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">file hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello: Mach-O 64-bit executable x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stat -f &amp;#34;%z bytes&amp;#34; hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1865360 bytes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到&lt;code>hello&lt;/code>为&lt;code>amd64&lt;/code>可执行文件&lt;/p>
&lt;h3 id="linux386">linux/386&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GOOS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;linux&amp;#34;&lt;/span> &lt;span class="nv">GOARCH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;amd64&amp;#34;&lt;/span> go build hello.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stat -f &lt;span class="s2">&amp;#34;%z bytes&amp;#34;&lt;/span> hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1766270&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">file hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello: ELF 64-bit LSB executable, x86-64, version &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>SYSV&lt;span class="o">)&lt;/span>, statically linked, Go &lt;span class="nv">BuildID&lt;/span>&lt;span class="o">=&lt;/span>4nLzeHpdkqWlrRwR6mPk/JAdxwggmJ5gsqVMt4mlt/Xol5lWt0hZOunqxxKn7P/es_ZQQWFuE-5KUihCVx5, not stripped
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>测试上传到centos可正常运行&lt;/p>
&lt;h3 id="linuxamd64">linux/amd64&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GOOS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;linux&amp;#34;&lt;/span> &lt;span class="nv">GOARCH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;386&amp;#34;&lt;/span> go build hello.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">file hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello: ELF 32-bit LSB executable, Intel 80386, version &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>SYSV&lt;span class="o">)&lt;/span>, statically linked, Go &lt;span class="nv">BuildID&lt;/span>&lt;span class="o">=&lt;/span>xpuIhVMKxJXV7Bg0bcc5/c8f9swVvGB1bHVdYXYCv/yjdgnmlDdpgUtuOKuZZ8/k8vjZwJaP57BC6_zfTiQ, not stripped
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stat -f &lt;span class="s2">&amp;#34;%z bytes&amp;#34;&lt;/span> hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1633884&lt;/span> bytes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>测试上传到centos可正常运行&lt;/p>
&lt;h3 id="二进制大小">二进制大小&lt;/h3>
&lt;p>mac下&lt;code>hello.go&lt;/code>amd64二进制比arm64的小.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GOOS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;darwin&amp;#34;&lt;/span> &lt;span class="nv">GOARCH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;amd64&amp;#34;&lt;/span> go build hello.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stat -f &lt;span class="s2">&amp;#34;%z bytes&amp;#34;&lt;/span> hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1865360&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GOOS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;darwin&amp;#34;&lt;/span> &lt;span class="nv">GOARCH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;arm64&amp;#34;&lt;/span> go build hello.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stat -f &lt;span class="s2">&amp;#34;%z bytes&amp;#34;&lt;/span> hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1932594&lt;/span> bytes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>linux amd64位比x86小(应该不限于linux)&lt;/p>
&lt;p>PS:mac下可用&lt;code>otool -L file&lt;/code>查看mach-o动态库依赖&lt;/p>
&lt;h1 id="rust">RUST&lt;/h1>
&lt;p>运行命令&lt;code>rustup target list&lt;/code>查当前支持的平台:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">aarch64-apple-darwin (installed)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aarch64-apple-ios
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aarch64-apple-ios-sim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aarch64-fuchsia
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aarch64-linux-android
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aarch64-pc-windows-msvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aarch64-unknown-linux-gnu (installed)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aarch64-unknown-linux-musl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aarch64-unknown-none
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aarch64-unknown-none-softfloat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arm-linux-androideabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arm-unknown-linux-gnueabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arm-unknown-linux-gnueabihf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arm-unknown-linux-musleabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arm-unknown-linux-musleabihf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armebv7r-none-eabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armebv7r-none-eabihf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armv5te-unknown-linux-gnueabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armv5te-unknown-linux-musleabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armv7-linux-androideabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armv7-unknown-linux-gnueabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armv7-unknown-linux-gnueabihf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armv7-unknown-linux-musleabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armv7-unknown-linux-musleabihf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armv7a-none-eabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armv7r-none-eabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">armv7r-none-eabihf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">asmjs-unknown-emscripten
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">i586-pc-windows-msvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">i586-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">i586-unknown-linux-musl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">i686-linux-android
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">i686-pc-windows-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">i686-pc-windows-msvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">i686-unknown-freebsd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">i686-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">i686-unknown-linux-musl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mips-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mips-unknown-linux-musl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mips64-unknown-linux-gnuabi64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mips64-unknown-linux-muslabi64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mips64el-unknown-linux-gnuabi64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mips64el-unknown-linux-muslabi64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mipsel-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mipsel-unknown-linux-musl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nvptx64-nvidia-cuda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">powerpc-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">powerpc64-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">powerpc64le-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">riscv32i-unknown-none-elf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">riscv32imac-unknown-none-elf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">riscv32imc-unknown-none-elf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">riscv64gc-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">riscv64gc-unknown-none-elf (installed)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">riscv64imac-unknown-none-elf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">s390x-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sparc64-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sparcv9-sun-solaris
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thumbv6m-none-eabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thumbv7em-none-eabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thumbv7em-none-eabihf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thumbv7m-none-eabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thumbv7neon-linux-androideabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thumbv7neon-unknown-linux-gnueabihf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thumbv8m.base-none-eabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thumbv8m.main-none-eabi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thumbv8m.main-none-eabihf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wasm32-unknown-emscripten
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wasm32-unknown-unknown (installed)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wasm32-wasi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-apple-darwin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-apple-ios
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-fortanix-unknown-sgx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-fuchsia
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-linux-android
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-pc-solaris
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-pc-windows-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-pc-windows-msvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-sun-solaris
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-unknown-freebsd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-unknown-illumos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-unknown-linux-gnu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-unknown-linux-gnux32
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-unknown-linux-musl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-unknown-netbsd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86_64-unknown-redox
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>rust相对于go来说平台明显更多不知道是不是用了llvm的原因&lt;/p>
&lt;h1 id="m1-mac-c编译x86">M1-mac-c编译x86&lt;/h1>
&lt;p>arm64是可以直接运行x86程序的,也可编译为x86:
下面例子来源于:
&lt;a class="link" href="https://stackoverflow.com/questions/68279407/does-intel-binary-run-faster-than-arm64-binary-on-m1-macbook" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/68279407/does-intel-binary-run-faster-than-arm64-binary-on-m1-macbook&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ make
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arch -x86_64 cc fib.c -o x86.out
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arch -arm64 cc fib.c -o arm64.out
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">file *.out
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arm64.out: Mach-O 64-bit executable arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">x86.out: Mach-O 64-bit executable x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">time ./x86.out
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Fibonacci 45 is 1134903170
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 8.32 real 7.54 user 0.01 sys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">time ./arm64.out
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Fibonacci 45 is 1134903170
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 10.21 real 9.77 user 0.01 sys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>cat fib.c&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="nf">fibonacci&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">45&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Print out number of characters in n
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Fibonacci %i is %i&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">fibonacci&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">fibonacci&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nf">fibonacci&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">fibonacci&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item></channel></rss>